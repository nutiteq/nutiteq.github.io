<!DOCTYPE html>
<html lang="en">
   
  <head>
    <title>CartoDB Estonia OÜ Developer portal</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../images/favicon.ico.html" type="image/x-icon">
    <link rel="icon" href="../images/favicon.ico.html" type="image/x-icon">
    
    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="cd7G01Du6+FEUtnTsXGp0VHwO3CLFi1VGlWLAbod5nuBb0xsUL22WgILXEhuPDwLOiOmRezt4lF/lFNDzSItig==" />
    
	<link rel="stylesheet" type="text/css" media="screen" href="../css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="http://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" />
    
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    
    <script src="http://code.jquery.com/ui/1.8.3/jquery-ui.js"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="http://code.jquery.com/ui/1.8.3/themes/smoothness/jquery-ui.css" />
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>

    <script src="../javascripts/3scale.js"></script>
    
    <script src="../javascripts/excanvas.compiled.js"></script>
    
    <script src="../javascripts/shCore.js"></script>
    <script src="../javascripts/shAutoloader.js"></script>
    <script src="../javascripts/shBrushXml.js"></script>
    <script src="../javascripts/shBrushJScript.js"></script>
    <script src="../javascripts/shBrushJava.js"></script>
    <script src="../javascripts/shBrushObjectiveC.js"></script>
    <script src="../javascripts/shBrushCSharp.js"></script>

    <!--[if lt IE 9]>
      <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.6/html5shiv.min.js"></script>
      <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    
    <link rel="stylesheet" type="text/css" media="screen" href="../css/default.css" />
    
    
    <link rel="stylesheet" type="text/css" media="screen" href="../css/nutiteq.css" />
    
    
    <link rel="stylesheet" type="text/css" media="screen" href="../css/shCoreEclipse.css" />


    
    
    
  </head>

  <body>
    <header role="banner">
      

      

        <div id="flash-messages">
          
        </div>
  
    </header>

	<header class="b-header">
      <div class="l-container">
        <h1 class="b-header__logo"><a href="http://www.nutiteq.com">Nutiteq</a></h1>
			<nav class="b-header__nav">
				<ul class="b-header_nav-list">
					
                  <li><a href="../samples.html">Demo</a></li>
                  <li><a href="../docs.html">Documentation</a></li>
                  <li><a href="../admin.1.html">Log in</a></li>	
                  	
				</ul>
			</nav>
		</div>
    </header>
    
    
    <main id="main-content" role="main">
      
        <div class="full">
          <div class="container">
  
            <section class="b-page">
  <div class="b-page__wrap l-container">
	<aside class="b-page__sidebar">

	<nav class="b-page__nav">
	<ul class="b-page__nav-list">
      <li ><a href="../getting-started.1.html">Getting Started</a></li>
      <li class="m-active"><a href="../guides.1.html">Guides</a></li>
      <li ><a href="../pro.html">Pro extensions</a></li>
      <li ><a href="../samples.html">Sample apps</a></li>
	  <li ><a href="../reference.html">Browse API reference</a></li>
      <li ><a href="../downloads.html">Downloads</a></li>
      <li ><a href="../support.html">Support and feedback</a></li>

	</ul>
	</nav>

	</aside>
	<div class="b-page__content">
      <div class="alert alert-info">
  <strong>Nutiteq is now part of CARTO!</strong> Please use latest <a href="https://carto.com/docs/carto-engine/mobile-sdk/" class="alert-link">CARTO Mobile SDK</a> for new projects. Nutiteq SDK 3.x support and updates ended in 2017, documentation here is outdated.
</div>

		<h1>Vector Styles</h1>

<p>Usage of vector-based base map enables you to re-style map according to your needs: set colors, transparency, line styles (width, patterns, casings, endings), polygon patterns, icons, text placements, fonts and many other vector data parameters. Nutiteq uses Mapnik (<a href="http://mapnik.org">http://mapnik.org</a>) XML style description language for customizing the visual style of vector tiles. Our styling is optimized for mobile, so we add some style parameters, and ignore some others, but generally you can mostly reuse your existing Mapnik XML or CartoCSS styling files and tools (like TileMill/Mapbox Studio).</p>

<p>Vector styling is applied in mobile client side, and the style files are usually bundled with application installer. Application can change the styling anytime without reloading vector map data, so you can download map data once, and change styling from &quot;day mode&quot; to &quot;night mode&quot; with no new downloads.</p>

<p>Nutiteq map rendering implementation is intended for real-time rendering and, as a result, several limitations apply.</p>

<h3>Ready-made styles</h3>

<p>See <a href="../downloads.html#Vector%20style%20files">Downloads</a> for ready-made styles by Nutiteq. These are compatible with our vector tile sources.</p>

<h3>Mapnik style format</h3>

<p>Mapnik map style definition is a common file format for map styles, it is based on XML. It is originally done for Mapnik, but is used by other softwares like Nutiteq SDK. File format specification is in <a href="https://github.com/mapnik/mapnik/wiki/XMLConfigReference">XMLConfigReference</a> document. There are several ways you can use the styles, from simplest to most advanced:</p>

<ol>
<li>Use Nutiteq provided styles as they are</li>
<li>Modify style.xml inside sample style to tweak it</li>
<li>Create own style using some tool which edits Mapnik styles. Probably currently the best tool is free MapBox Studio, which uses CartoCSS as primary style definition. We don&#39;t use CartoCSS in Nutiteq SDK, but Studio but can export also Mapnik XML styles. However, these style files needs a bit modification to be compatible with Nutiteq SDK. </li>
</ol>

<h3>Creating style package</h3>

<p>Nutiteq vector styles are distributed as zip-archives. All style-related files/folders must be placed into a single zip file.
The most important part of the style is a style definition file, usually named <em>project.xml</em>. This file contains style descriptions of all layers and it usually references other files, like fonts, icons, pattern bitmaps which should be placed in various subfolders.</p>

<h3>Limitations/incompatibilities</h3>

<ul>
<li><p>There are no built-in fonts, fonts must be explicitly added to the project</p></li>
<li><p>Loading SVG icons is not supported, such icons should be converted to PNG format (Mapnik provides <em>svg2png</em> utility)</p></li>
<li><p>Original layer ordering is not always preserved, texts are always drawn on top of 2d geometry, 3d buildings are drawn on top of texts</p></li>
<li><p>Layer opacity works per element, not per layer as in Mapnik. For non-overlapping elements, the result will be same. For overlapping elements there are likely artifacts.</p></li>
<li><p><em>comp-op</em> feature is not supported (neither layer/symbolizer). Per symbolizer <em>comp-op</em> support is under investigation</p></li>
<li><p><em>line-join</em> parameter is ignored, only <em>miter</em> line join is used. </p></li>
<li><p><em>GroupSymbolizer</em> and <em>RasterSymbolizer</em> are not supported, support is under investigation</p></li>
<li><p>Text characters are rendered one by one. If characters overlap, halo of one character may cover glyph of another character. Workaround is to increase spacing or decrease halo radius.</p></li>
<li><p>This list is not final. Mapnik XML is not official standard, and mostly due to performance penalty on the mobile Nutiteq SDK does not implement 100% of the tags and features of Mapnik. If you need some of the not implemented styling options, please contact our support. </p></li>
</ul>

<h3>Performance hints</h3>

<ul>
<li><p><strong>Multiple symbolizers per layer may have very large performance hit</strong>. If possible, move each symbolizer into separate layer.</p></li>
<li><p><em>BuildingSymbolizer</em> requires expensive OpenGL frame buffer read-back operation and may perform very poorly on some devices (original iPad Retina)</p></li>
<li><p>It is best to keep all bitmaps with power-of-two dimensions, this increases performance.</p></li>
</ul>

<h3>Nutiteq-specific extension to Mapnik style files</h3>

<h4><em>NutiParameters</em></h4>

<p><em>NutiParameters</em> describe additional parameters that can be used in styles and controlled in the code (from <em>MBVectorTileDecoder</em>).
Parameters are typed, have default values and can be used as variables within <em>nuti</em> namespace in the style (for example, <em>[nuti::lang]</em>).
Some parameters may have _ prefix in their name. Such variables are reserved and should not be updated directly by the application.</p>

<p>Simple example of <em>NutiParameters</em> section in style xml file:</p>

<p><code>&lt;NutiParameters&gt;</code>
<code>&lt;NutiParameter name=&quot;lang&quot; type=&quot;string&quot; value=&quot;en&quot; /&gt;</code>
<code>&lt;/NutiParameters&gt;</code></p>

<h4>Metavariables</h4>

<p>Metavariables add support for dynamic variable look up. Variable names may depend on other variables. For example, <em>[name_[nuti::lang]]</em>.
If the value of <em>nuti::lang</em> is &#39;en&#39;, this metavariable expression would be equal to <em>[name_en]</em> expression.</p>

<h4>Conditional operator</h4>

<p>Conditional operator ?: adds support for simple control flow management. It is similar to C language conditional operator and can be used in all 
expressions. For example:</p>

<p><code>[nuti::lang] == &#39;en&#39; ? &#39;English&#39; : &#39;Other&#39;</code></p>

<h4>3D texts and markers</h4>

<p>Mapnik <em>MarkersSymbolizer</em> and <em>TextSymbolizer</em> support additional value <em>nutibillboard</em> for <em>placement</em> parameter. This will make texts and
markers act as billboards (always facing the viewer) even when screen is tilted. This option can be used to give markers and texts more
&#39;3d-like&#39; look. For example,</p>

<p><code>&lt;MarkersSymbolizer placement=&quot;nutibillboard&quot; fill=&quot;#666666&quot; file=&quot;icon/[maki]-12.svg&quot; /&gt;</code></p>

<h3>Supported symbolizers and parameters</h3>

<p>The following list contains all supported symbolizers and parameters, as of version 3.2.2:</p>

<ul>
<li><p>PointSymbolizer: file, opacity, allow-overlap, ignore-placement, transform</p></li>
<li><p>BuildingSymbolizer: fill, fill-opacity, height, geometry-transform</p></li>
<li><p>LineSymbolizer: stroke, stroke-width, stroke-opacity, stroke-linejoin, stroke-linecap, stroke-dasharray, geometry-transform</p></li>
<li><p>LinePatternSymbolizer: file, fill, opacity, geometry-transform</p></li>
<li><p>PolygonSymbolizer: fill, fill-opacity, geometry-transform</p></li>
<li><p>PolygonPatternSymbolizer: file, fill, opacity, geometry-transform</p></li>
<li><p>MarkersSymbolizer: file, placement, marker-type, fill, opacity, width, height, spacing, allow-overlap, ignore-placement, transform</p></li>
<li><p>TextSymbolizer: name, face-name, fontset-name, placement, size, spacing, fill, opacity, halo-fill, halo-opacity, halo-radius, allow-overlap, minimum-distance, text-transform, orientation, dx, dy, wrap-width, wrap-before, character-spacing, line-spacing, horizontal-alignment, vertical-alignment</p></li>
<li><p>ShieldSymbolizer: name, face-name, fontset-name, placement, size, spacing, fill, opacity, halo-fill, halo-opacity, halo-radius, allow-overlap, minimum-distance, text-transform, orientation, dx, dy, wrap-width, wrap-before, character-spacing, line-spacing, horizontal-alignment, vertical-alignment, file, shield-dx, shield-dy, unlock-image</p></li>
</ul>

    </div>
   </div>
</section>
            
            
          </div>
        </div>
      
    </main>    
    
    <footer class="b-footer">
		<p>&copy; 2018 CartoDB Estonia OÜ | <a href="../termsofservice.html">Terms of Service</a> | <a href="../privacypolicy.html">Privacy Policy</a> | <a href="../refundpolicy.html">Refund Policy</a></p>
	</footer>

    <!-- JS and analytics only. -->
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <a title="Real Time Analytics" href="http://clicky.com/100810539"><img alt="Real Time Analytics" src="http://static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script src="http://static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(100810539); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="http://in.getclicky.com/100810539ns.gif" /></p></noscript>

    <script src="../javascripts/init.js"></script>
	<script type="text/javascript">
    	 SyntaxHighlighter.all()
         SyntaxHighlighter.defaults['toolbar'] = false;
         SyntaxHighlighter.defaults['gutter'] = false;
	</script>
  </body>
</html>
